<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JavaScript Web APIs</title>
</head>

<body>
    <h1>JavaScript Web APIs</h1>
    <h2>WEB History API</h2>
    <button onclick="back()">Go back</button>
    <button onclick="go()">Go back 2 pages</button>
    <button onclick="forward()">Go forward</button>
    <h2>WEB History API</h2>
    <button onclick="setItem()">Set Item</button>
    <button onclick="getItem()">Get Item</button>
    <button onclick="removeItem()">Remove Item</button>
    <h2>WEB Fetch API</h2>
    <button onclick="fetchUsers()">Fetch Users</button>
    <h2>Web Notification API</h2>
    <button onclick="notifyme()">Notify me!</button>
    <script>
        //Web History API
        function back() {
            history.back();
        }

        function go() {
            history.go(-2);
        }

        function forward() {
            history.forward();
        }

        //WEB Storage API 
        function setItem() {
            //local storage
            localStorage.setItem('name', 'Sümeyra Dayanır')
            //session storage
            sessionStorage.setItem('name', 'Özgür Dayanır')
        }

        function getItem() {
            //local storage
            console.log('local', localStorage.getItem('name'))
            //session storage
            console.log('session', sessionStorage.getItem('name'))
        }

        function removeItem() {
            //local storage
            localStorage.removeItem('name')
            //session storage
            sessionStorage.removeItem('name')
        }

        //Web Fetch API

        function fetchUsers() {
            fetch('https://jsonplaceholder.typicode.com/users').then(function (response) {
                return response.json();
            })
                .then(function (users) {
                    console.log('users', users);
                })
        }

        //Web Notification API

        function sayHi() {
            const notification = new Notification('Merhaba Özgür');
        }

        function notifyme() {
            if ('Notification' in window) {
                if (Notification.permission === 'granted') {
                    console.log('Bildirim gönder');
                } else if (Notification.permission === 'denied') {
                    console.log('Bildirim izni verilmedi.');
                } else {
                    console.log('Notification API için izin iste.');
                    Notification.requestPermission().then((permission) => {
                        if (permission === 'granted') {
                            sayHi();
                            console.log('Bildirim gönder.') 
                        }
                    });
                }
            } else {
                console.log('Notification API desteklenmiyor.');
            }
        }

    </script>

</body>

</html>